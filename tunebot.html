<!DOCTYPE HTML>
    <html>
        <head>
            <style>
                p {
                  line-height: 100%;
                }
            </style>
        </head>
    <body onload="initialize()">

        <h1>TUNE-BOT</h1>
        <p>JavaScript practice project based on <a href="http://sdkbridge.com/">Peter Gruenbaum</a>'s Udemy course <a href="https://www.udemy.com/coding-for-writers-1-basic-programming/learn/v4/overview" target="_blank">Coding for Writers</a>, inspired by <a href="https://en.wikipedia.org/wiki/Joseph_Weizenbaum">Joseph Weizenbaum</a>. Work in progress.</p><br>
            <p><input id="textbox" size="75" placeholder="Tell TUNE-BOT how you feel today"/></p>
            <p><button onclick="submitLine()">Submit</button></p>

            <div id="conversation"></div>

            <script>

                var tunebotSession;

                const sadResponses = [
                  "sad1",
                  "sad2",
                  "sad3",
                  "sad4"];

                const happyResponses = [
                  "happy1",
                  "happy2",
                  "happy3",
                  "happy4"];

                const lonelyResponses = [
                  "lonely1",
                  "lonely2",
                  "lonely3",
                  "lonely4"];

                const homesickResponses = [
                  "homesick1",
                  "homesick2",
                  "homesick3",
                  "homesick4"];

                const afraidResponses = [
                  "afraid1",
                  "afraid2",
                  "afraid3",
                  "afraid4"];

                const angryResponses = [
                  "angry1",
                  "angry2",
                  "angry3",
                  "angry4"];

                const ashamedResponses = [
                  "ashamed1",
                  "ashamed2",
                  "ashamed3",
                  "ashamed4"];

                const jealousResponses = [
                  "jealous1",
                  "jealous2",
                  "jealous3",
                  "jealous4"];

                const confusedResponses = [
                  "confused1",
                  "confused2",
                  "confused3",
                  "confused4"];

                const relaxedResponses = [
                  "relaxed1",
                  "relaxed2",
                  "relaxed3",
                  "relaxed4"];

                const excitedResponses = [
                  "excited1",
                  "excited2",
                  "excited3",
                  "excited4"];

                const genericResponses = [
                  "generic1",
                  "generic2",
                  "generic3",
                  "generic4"];

                /**
                 * Phrase for starting Tune Bot responses.
                 * @constant
                 * @type {}
                 */
                const tunebotStarts = [
                  "The Tune Bot recommends listening to "];

                /**
                 * Called when the browser loads the page.
                 * Displays initial message from the therapist
                 * and places the cursor in the textbox so the
                 * user can begin typing immediately.
                 * @function
                 */
                function initialize() {
                    tunebotSession = "<p></p>";
                    document.getElementById("textbox").focus();
                    conversation.innerHTML = tunebotSession;
                }

                /**
                 * Called when the user selects the *Submit* button.
                 * Chooses a TUNE-BOT response based on strings in the
                 * player's text, with responses randomly selected from
                 * the options for constants. If the player enters an
                 * unrecognized string, the response is randomly selected
                 * from the options for constant genericResponses.
                 * @function
                 */
                function submitLine() {
                    /**
                     * Holds user's text from textbox.
                     */
                    var playerLine = textbox.value;

                    /**
                     * Holds therapist's response.
                     */
                    var tunebotLine;
                        if (playerLine.includes("sad")) {
                            tunebotLine = randomElement(sadResponses);
                        } else if (playerLine.includes("unhapp")) {
                            tunebotLine = randomElement(sadResponses);
                        } else if (playerLine.includes("happ")) {
                            tunebotLine = randomElement(happyResponses);
                        } else if (playerLine.includes("lone")) {
                            tunebotLine = randomElement(lonelyResponses);
                        } else if (playerLine.includes("home")) {
                            tunebotLine = randomElement(homesickResponses);
                        } else if (playerLine.includes("afraid")) {
                            tunebotLine = randomElement(afraidResponses);
                        } else if (playerLine.includes("fear")) {
                            tunebotLine = randomElement(afraidResponses);
                        } else if (playerLine.includes("ang")) {
                            tunebotLine = randomElement(angryResponses);
                        } else if (playerLine.includes("mad")) {
                            tunebotLine = randomElement(angryResponses);
                        } else if (playerLine.includes("shame")) {
                            tunebotLine = randomElement(ashamedResponses);
                        } else if (playerLine.includes("jeal")) {
                            tunebotLine = randomElement(jealousResponses);
                        } else if (playerLine.includes("env")) {
                            tunebotLine = randomElement(jealousResponses);
                        } else if (playerLine.includes("conf")) {
                            tunebotLine = randomElement(confusedResponses);
                        } else if (playerLine.includes("uncert")) {
                            tunebotLine = randomElement(confusedResponses);
                        } else if (playerLine.includes("unsur")) {
                            tunebotLine = randomElement(confusedResponses);
                        } else if (playerLine.includes("relax")) {
                            tunebotLine = randomElement(relaxedResponses);
                        } else if (playerLine.includes("excit")) {
                            tunebotLine = randomElement(excitedResponses);
                        } else if (tunebotLine == null) {
                            tunebotLine = randomElement(genericResponses);
                        }

                    tunebotSession += "<p>" + tunebotStarts + tunebotLine + "</p>";

                    /**
                     * Empties the textbox each time the user selects
                     * the *Submit* button.
                     * @method [<document.getElementByID("textbox").value = "">]
                     * @param {id} "textbox" - The ID for the textbox
                     * where the cursor will refocus.
                     */
                    document.getElementById("textbox").value = "";

                    /**
                     * Refocuses the cursor in the textbox each time
                     * the user selects the *Submit* button.
                     * @method [<document.getElementByID("textbox").focus()>]
                     * @param {id} "textbox" - The ID for the textbox
                     * where the cursor will refocus.
                     */
                    document.getElementById("textbox").focus();
                      conversation.innerHTML = tunebotSession;
                }

                /**
                 * Returns a random item in an array.
                 * @function
                 * @param {Array} myArray - The array
                 * from which a random number is returned.
                 */
                function randomElement(myArray) {
                    var index = Math.floor(Math.random() * myArray.length);
                    return myArray[index];
                }

            </script>
    </body>
</html>
